<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      * {
        margin: 0;
        padding: 0;
      }
      body {
        /* height: 2000px; */
        background-color: black;
      }
      .content {
        width: 100px;
        height: 100px;
        background-color: #f7d1d1;
        border-radius: 10px;
      }
      .box {
        width: 50px;
        height: 50px;
        border-radius: 10px;
        margin: 50px 10px;
      }
      .box:nth-child(2n) {
        background-color: #f5d2d2;
      }
      .box:nth-child(2n-1) {
        background-color: #e7bdf8;
      }
    </style>
  </head>
  <body>
    <!-- <div class="content"></div> -->
    <!-- <div
      style="display: flex; align-items: center; flex-wrap: wrap; width: 500px"
    > -->
    <!-- <div class="box" style="margin-top: 800px"></div> -->
    <!-- <div class="box"></div> -->
    <!-- <div class="box"></div> -->
    <!-- <div class="box"></div> -->
    <!-- <div class="box"></div> -->
    <div class="box"></div>
    <!-- </div>

    <!-- <div class="text" style="font-size: 22px; color: #ffffff">HELLOWORLD</div> -->
  </body>
</html>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/CustomEase.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
<!-- <script>
  //   gsap.registerPlugin(CustomBounce);
  gsap.to(".content", {
    x: 200,
    rotation: 90,
    duration: 1,
    yoyo: true,
    repeat: 2,
    delay: 1,
    repeatDelay: 1,
    // ease: CustomBounce.create("myBounce", {
    //   strength: 0.7,
    //   endAtStart: false,
    //   squash: 1,
    //   squashID: "myBounce-squash",
    // }),
  });
  //create an object

  // 任何属性添加动画
  // let obj = { myNum: 10, myColor: "red" };

  // gsap.to(obj, {
  //   myNum: 200,
  //   myColor: "blue",
  //     onUpdate: () => {
  //        document.querySelector(".content").style.backgroundColor = obj.myColor;
  //      },
  //   });
  // }, 1000);
</script> -->
<script>
  // import { Flip } from "https://esm.sh/gsap/Flip";

  // gsap.to(".box", {
  //   y: 100,
  //   stagger: -0.1,
  // });

  // var grid = [5, 13], //[rows, columns]
  //   tl = gsap.timeline({ repeat: -1, repeatDelay: 0.5 });

  // function animateBoxes(from, axis, ease) {
  //   //one stagger call does all the animation:
  //   tl.to(".box", {
  //     duration: 1,
  //     scale: 0.1,
  //     y: 60,
  //     yoyo: true,
  //     repeat: 1,
  //     ease: "power1.inOut",
  //     stagger: {
  //       amount: 1.5,
  //       grid: grid,
  //       axis: axis,
  //       ease: ease,
  //       from: from,
  //     },
  //   });
  // }
  // animateBoxes("center", "x", "ease");

  // gsap.to(".box", {
  //   duration: 1,
  //   y: 2000,
  //   scrollTrigger: {
  //     trigger: "body",
  //     start: "center center",
  //     end: "bottom top",
  //     scrub: true,
  //     onEnter: () => {
  //       console.log("元素进入视口");
  //     },
  //     onLeave: () => {
  //       console.log("元素离开视口");
  //     },
  //     onEnterBack: () => {
  //       console.log("元素重新进入视口");
  //     },
  //     onLeaveBack: () => {
  //       console.log("元素重新离开视口");
  //     },
  //     onUpdate: (self) => {
  //       console.log("滚动更新，进度：", self.progress);
  //     },
  //   },
  // });

  // 滚动动画
  // const box = gsap.utils.toArray(".box");
  // box.forEach((item, index) => {
  //   if (index % 2 == 0) {
  //     gsap.to(item, {
  //       x: 200,
  //       duration: 1,
  //       scrollTrigger: {
  //         trigger: item,
  //         toggleActions: "play none none reset",
  //       },
  //     });
  //   } else {
  //     gsap.to(item, {
  //       x: 200,
  //       duration: 1,
  //       scrollTrigger: {
  //         trigger: item,
  //         scrub: true,
  //         pin: true, // 固定到屏幕上
  //       },
  //     });
  //   }
  // });

  // 文本淡入淡出
  // const tl = gsap.timeline({ repeat: -1 });
  // // split = new SplitText(".text", { type: "chars, words" }),
  // // chars = split.chars;
  // tl.set(chars, { color: "random([#6fb936, #f38630, #989898, pink])" }, 2);
  // tl.from(chars, {
  //   opacity: 0,
  //   duration: 0.1,
  //   stagger: 0.1,
  // });

  // tl.to(chars, {
  //   duration: 0.5,
  //   opacity: 0,
  //   stagger: 0.05,
  //   ease: "power4.inOut",
  // });

  // 关键帧
  // gsap.to(".box", {
  //   keyframes: [
  //     { x: 100, duration: 1, ease: "sine.out" }, // finetune with individual eases
  //     { y: 200, duration: 1, delay: 0.5 }, // create a 0.5 second gap
  //     { rotation: 360, duration: 2, delay: -0.25 }, // overlap by 0.25 seconds
  //   ],
  //   ease: "expo.inOut", // ease the entire keyframe block
  // });

  // 百分比关键帧
  // gsap.to(".box", {
  //   keyframes: {
  //     "0%": { x: 100, y: 100 },
  //     "75%": { x: 0, y: 0, ease: "sine.out" }, // finetune with individual eases
  //     "100%": { x: 50, y: 50 },
  //     easeEach: "expo.inOut", // ease between keyframes
  //   },
  //   ease: "none", // ease the entire keyframe block
  //   duration: 2,
  // });

  // 简单数组关键帧
  // gsap.to(".box", {
  //   keyframes: {
  //     x: [100, 0, 50],
  //     y: [100, 0, 50],
  //     easeEach: "sine.inOut", // ease between keyframes
  //     ease: "expo.out", // ease the entire keyframe block
  //   },
  //   duration: 2,
  // });

  // 缓和 百分比关键帧和简单关键帧
  // let eachTween = gsap.to(".box", {
  //   keyframes: {
  //     x: [0, 100, 100, 0, 0],
  //     y: [0, 0, 100, 100, 0],
  //     easeEach: "power4.inOut", // <- customise the ease between each keyframe
  //   },
  //   duration: 5,
  //   paused: true,
  // });

  // let easeTween = gsap.to(".box", {
  //   keyframes: {
  //     x: [0, 100, 100, 0, 0],
  //     y: [0, 0, 100, 100, 0],
  //     easeEach: "none", // <- override the default keyframe ease
  //   },
  //   ease: "power4.inOut", // <- apply an ease to all the keyframes
  //   duration: 5,
  //   paused: true,
  // });

  // easeTween.play();

  // let form = document.querySelector("form");
  // let text = document.querySelector(".text");

  // form.addEventListener("change", (e) => {
  //   let value = document.querySelector("input:checked").value;

  //   if (value === "ease") {
  //     eachTween.kill();
  //     easeTween.play(0);
  //     text.textContent = "ease the whole keyframe";
  //   } else {
  //     easeTween.kill();
  //     eachTween.play(0);
  //     text.textContent = "ease between keyframes";
  //   }
  // });

  // 缓和 对象关键帧和百分比关键帧
  gsap.set(".box", { opacity: 1 });

  gsap.to(".box", {
    keyframes: {
      "0%": { yPercent: 0, scaleX: 1, scaleY: 1 },
      "7%": { yPercent: 5, scaleY: 0.9, scaleX: 1.1, ease: "sine.in" },
      "25%": { yPercent: 100, scaleY: 1.15, scaleX: 0.9, ease: "sine.in" },
      "50%": { yPercent: 500, scaleX: 1, scaleY: 1, ease: "none" },
      "60%": { scaleX: 1.6, scaleY: 0.4, ease: "none" },
      "65%": { yPercent: 500, scaleX: 1, scaleY: 1 },
      "100%": { yPercent: 0, scaleX: 1, scaleY: 1 },
      easeEach: "sine.out",
    },
    duration: 1,
    repeat: -1,
    transformOrigin: "center bottom",
  });

  // gsap.to(".box", {
  //   scale: 0.7,
  //   duration: 0.5,
  //   repeat: -1,
  //   yoyo: true,
  //   ease: "sine.inOut",
  //   transformOrigin: "center",
  // });

  // gsap.to(".box", {
  //   keyframes: {
  //     y: [0, 80, -10, 30, 0],
  //     ease: "none", // <- ease across the entire set of keyframes (defaults to the one defined in the tween, or "none" if one isn't defined there)
  //     easeEach: "power2.inOut", // <- ease between each keyframe (defaults to "power1.inOut")
  //   },
  //   rotate: 180,
  //   ease: "elastic", // <- the "normal" part of the tween. In this case, it affects "rotate" because it's outside the keyframes
  //   duration: 5,
  //   stagger: 0.2,
  // });

  // react 父子组件公用一个时间线
  //   function Box({ children, timeline, index }) {
  //   const el = useRef();

  //   useGSAP(() => {
  //     // add 'left 100px' animation to timeline
  //     timeline && timeline.to(el.current, {
  //       x: -100
  //     }, index * 0.1);

  //   }, [timeline, index]);

  //   return <div className="box" ref={el}>{children}</div>;
  // }

  // function Circle({ children, timeline, index, rotation }) {
  //   const el = useRef();

  //   useGSAP(() => {
  //     // add 'right 100px, rotate 360deg' animation to timeline
  //     timeline && timeline.to(el.current, {
  //       rotation: rotation,
  //       x: 100
  //     }, index * 0.1);

  //   }, [timeline, rotation, index]);

  //   return <div className="circle" ref={el}>{children}</div>;
  // }

  // function App() {
  //   const [tl, setTl] = useState();

  //   useGSAP(() => {
  //     const tl = gsap.timeline();
  //     setTl(tl);
  //   });

  //   return (
  //       <div className="app">
  //         <Box timeline={tl} index={0}>Box</Box>
  //         <Circle timeline={tl} rotation={360} index={1}>Circle</Circle>
  //       </div>
  //   );
  // }

  //   function Box({ children, addAnimation, index }) {
  //   const el = useRef();

  //   useGSAP(() => {
  //     const animation = gsap.to(el.current, { x: -100 });
  //     addAnimation(animation, index);
  //   }, [addAnimation, index]);

  //   return (
  //     <div className="box" ref={el}>{children}</div>
  //   );
  // }

  // function Circle({ children, addAnimation, index, rotation }) {
  //   const el = useRef();

  //   useGSAP(() => {
  //     const animation = gsap.to(el.current, { rotate: rotation, x: 100 });
  //     addAnimation(animation, index);
  //   }, [addAnimation, index, rotation]);

  //   return (
  //     <div className="circlee" ref={el}>{children}</div>
  //   );
  // }

  // function App() {
  //   const [reversed, setReversed] = useState(false);
  //   const [tl, setTl] = useState();

  //   useGSAP(() => {
  //     const tl = gsap.timeline();
  //     setTl(tl);
  //   }, []);

  //   const addAnimation = useCallback((animation, index) => {
  //     tl && tl.add(animation, index * 0.1);
  //   },[tl]);

  //   const toggleTimeline = contextSafe(() => {
  //     tl.current.reversed(!tl.current.reversed())
  //   });

  //   useGSAP(() => {
  //     // reverse the tim
  //     tl && tl.reversed(reversed);
  //   }, [reversed, tl]);

  //   return (
  //     <div className="app">
  //       <button onClick={() => setReversed(!reversed)}>Toggle</button>
  //       <Box addAnimation={addAnimation} index={0}>Box</Box>
  //       <Circle addAnimation={addAnimation} index={1} rotation="360">Circle</Circle>
  //     </div>
  //   );
  // }

  // function App() {
  //   const [items, setItems] = useState(() => [
  //     { id: 0, color: "blue" },
  //     { id: 1, color: "red" },
  //     { id: 2, color: "purple" },
  //   ]);

  //   const { contextSafe } = useGSAP();

  //   const remove = contextSafe((item, target) => {
  //     gsap.to(target, {
  //       opacity: 0,
  //       onComplete: () => removeItem(item),
  //     });
  //   });

  //   const removeItem = (value) => {
  //     setItems((prev) => prev.filter((item) => item !== value));
  //   };

  //   return (
  //     <div className="app" ref={container}>
  //       {items.map((item) => (
  //         <div key={item.id} onClick={(e) => ctx.remove(item, e.currentTarget)}>
  //           Click Me
  //         </div>
  //       ))}
  //     </div>
  //   );
  // }

  //   function useStateRef(defaultValue) {
  //   const [state, setState] = useState(defaultValue);
  //   const ref = useRef(state);

  //   const dispatch = useCallback((value) => {
  //     ref.current = typeof value === "function" ? value(ref.current) : value;
  //     setState(ref.current);
  //   }, []);

  //   return [state, dispatch, ref];
  // }
</script>
